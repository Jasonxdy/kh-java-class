<!DOCTYPE html>
<html lang="ko">
    <head>
    <meta charset="UTF-8">
        <title>12. 객체</title>
        <style>
            .area{
                height: 300px;
                border : 1px solid black;
                background-color: lightgray;
            }
        </style>
    </head>
    <body>
        <h1>객체</h1>
        <h3>객체 선언 및 속성 호출</h3>
        <p>
            자바스크립트 객체는 Key:Value(속성) 형태로 이루어짐.<br>
            객체는 {}(중괄호, 객체 리터럴) 또는 new 를 이용하여 생성 가능하고,<br>
            속성에는 모든 자료형이 올 수 있다.
        </p>
        <button onclick="test1();">실행확인</button>
        <div id="area1" class="area"></div>
        <script>
            function test1(){
                var product = {
                    pName : 'Dry Mango',
                    ingredient : ['mango', 'sugar']
                }

                var area1 = document.getElementById("area1");

                area1.innerHTML = ""; // 이전 내용 삭제
                area1.innerHTML 
                    += "<b>객체명.속성명  으로 속성 접근하기</b><br>";
                area1.innerHTML
                    += "product.pName : " + product.pName + "<br>"; 
                area1.innerHTML
                    += "product.ingredient[0] : " + product.ingredient[0] + "<br>";
                area1.innerHTML
                    += "product.ingredient[1] : " + product.ingredient[1]+ "<br><br><br>";


                area1.innerHTML
                    += "<b>객체명['속성명']으로 속성 접근하기</b><br>";
                area1.innerHTML
                    += "product['pName'] : " + product['pName'] + "<br>";
                area1.innerHTML
                    += "product['ingredient'][0] : " 
                        + product['ingredient'][0] + "<br>";
                area1.innerHTML
                    += "product['ingredient'][1] : " 
                        + product['ingredient'][1] + "<br>";
            }
        </script>

        <hr>

        <h3>객체의 메소드 속성</h3>
        <p>객체의 속성 중 타입이 함수(function)인 속성을 메소드라고 함.</p>
        <button onclick="test2();">실행확인</button>
        <div id="area2" class="area"></div>
        <script>
            function test2(){
                var area2 = document.getElementById("area2");
                var name = "뽀삐";

                var dog = {
                    name : '복실이',
                    eat : function(food){ // 메소드
                        // 객체 내에서 객체 자신의 속성을 호출할 경우
                        // 반드시 this. 를 사용해야 한다.(자바와 반대)
                        area2.innerHTML 
                            = name + "가/이가 " + food + "을/를 먹습니다.<br>";
                        
                        area2.innerHTML 
                            += this.name + "가/이가 " + food + "을/를 먹습니다.";
                        
                        // 다른 프로그래밍 언어 개발자들이 가장 많이하는 실수 중 하나!
                        // 반드시 객체 내부 속성 접근 시 this. 을 명시적으로 사용할 것.
                    }
                }

                dog.eat('사료');
            }
        </script>
        
        <hr>

        <h3>객체 속성 반복 접근</h3>
        <p>
            for in 문 : 객체의 속성에 순차적으로 접근
        </p>
        <button onclick="test3()">실행확인</button>
        <div id="area3" class="area"></div>
        <script>
            function test3(){
                var game = {
                    title : 'PUBG',
                    price : '32,000원',
                    language : '한국어지원',
                    supportOS : 'Windows 32bit/64bit',
                    service : true
                }

                for(var key in game){
                    document.getElementById("area3").innerHTML
                       += key + " : " + game[key] + "<br>";
                }
            }
        </script>
    
        <hr>

        <h3>객체에 사용할 수 있는 키워드 (in, with)</h3>
        <p>
            in : 객체 내부에 해당 속성이 있는지 확인하는 키워드<br>
            with : 객체 호출 시 객체명을 생략시켜 코드를 감소시키는 키워드
        </p>

        <label for="name">이름 : </label>
        <input type="text" id="name"><br>

        <label for="kor">국어점수 : </label>
        <input type="text" id="kor"><br>

        <label for="eng">영어점수 : </label>
        <input type="text" id="eng"><br>

        <label for="math">수학점수 : </label>
        <input type="text" id="math"><br>

        <button onclick="test4();">실행확인</button>
        <div id="area4" class="area"></div>
        <script>
            function test4(){
                var name = document.getElementById("name").value;
                var kor = parseInt( document.getElementById("kor").value );
                var eng = parseInt( document.getElementById("eng").value );
                var math = parseInt( document.getElementById("math").value );

                var student = {
                    name : name,
                    kor : kor,
                    eng : eng,
                    math : math
                // key값 : 지역 변수명
                }

                var area4 = document.getElementById("area4");

                area4.innerHTML = "<b>in 키워드 테스트</b><br>";

                area4.innerHTML 
                    += "student 객체에 name 속성이 있는지 확인 : "
                        +('name' in student) + "<br>";
                area4.innerHTML 
                    += "student 객체에 eng 속성이 있는지 확인 : "
                        +('eng' in student) + "<br>";
                area4.innerHTML 
                    += "student 객체에 sum 속성이 있는지 확인 : "
                        +('sum' in student) + "<br><br><br>";

                /*
                area4.innerHTML += "학생 이름 : " +student.name + "<br>";        
                area4.innerHTML += "국어 점수 : " +student.kor + "<br>";        
                area4.innerHTML += "영어 점수 : " +student.eng + "<br>";        
                area4.innerHTML += "수학 점수 : " +student.math + "<br>";
                area4.innerHTML += "총점 : " 
                    + (student.kor + student.eng + student.math) + "<br>";
                area4.innerHTML += "평균 : "
                    + (student.kor + student.eng + student.math)/3 + "<br>";
                */
               
                with(student){
                    area4.innerHTML += "학생 이름 : " + name + "<br>";        
                    area4.innerHTML += "국어 점수 : " + kor + "<br>";        
                    area4.innerHTML += "영어 점수 : " + eng + "<br>";        
                    area4.innerHTML += "수학 점수 : " + math + "<br>";
                    area4.innerHTML += "총점 : " 
                        + (kor + eng + math) + "<br>";
                    area4.innerHTML += "평균 : "
                        + (kor + eng + math)/3 + "<br>";
                }
            }
        </script>

        <hr>

        <h3>객체의 속성 추가 및 제거</h3>
        <p>
            처음 객체 생성 이후 속성을 추가/제거하는 것을<br>
            '동적으로 속성을 추가/제거 한다' 하고 표현함.
        </p>
        <button onclick="test5()">실행확인</button>
        <script>
            function test5(){
                // 비어있는 객체 선언
                var student = {};

                console.log(student);

                // 객체에 속성 추가
                student.name = "홍길동";
                student.hobby = "게임";
                student.strength = "도둑질";
                student.dream = "호형호제";

                console.log(student);

                // 객체 속성 제거
                delete(student.dream);

                console.log(student);
            }
        </script>
    </body>
</html>